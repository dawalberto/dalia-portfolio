---
import Icon from '@components/Icon.astro';
const navLinks = [
    { href: "/", label: "Home" },
    { href: "/projects", label: "Proyectos", children: [
        { href: "/projects/cipher", label: "Cipher" },
        { href: "/projects/fas", label: "Fas" },
        { href: "/projects/carrefour", label: "Carrefour" },
        { href: "/projects/banc-sabadell", label: "Banc Sabadell" },
        { href: "/projects/atid", label: "Atid" },
    ] },
    { href: "/about", label: "Sobre mi" },
    { href: "/contact", label: "Contacto" },
];
const { pathname } = Astro.url;
---

<!-- 48px height of menu -->
<nav class="min-h-12 font-inter flex items-center fixed left-0 w-dvw z-10 bg-white">
    <ul class="flex space-x-4 w-fit mx-auto relative">
        {navLinks.map((navItem) => (
                <li class="min-w-36 px-5 py-3 text-center group" class:list={navItem.children && 'dropdown'}>
                    <a href={navItem.href} class:list={[pathname === navItem.href ? 'font-bold' : '', navItem.children && 'flex justify-between items-center']} class="text-main-0 items-center group-hover:font-bold transform duration-200">
                        <span>{navItem.label}</span>
                        {navItem.children ? <span class="text-[#7E7E7E]  group-hover:rotate-90 group-hover:text-main-0 transform transition duration-300"><Icon icon="caret-down" /></span> : ''}
                    </a>
                    {navItem.children && (
                        <ul class="dropdown-content rounded-lg bg-[#F9F9F9]">
                            {navItem.children.map((child, i) => (
                                <li class="px-6 py-1" class:list={i !== 0 && i !== navItem.children.length ? 'border-t border-gray-300' : ''}>
                                    <a href={child.href} class:list={pathname === child.href ? 'font-bold' : ''} class="w-full block h-full box-border text-main-0 text-sm hover:font-bold transform duration-200">
                                        {child.label}
                                    </a>
                                </li>
                            ))}
                        </ul>
                    )}
                </li>
        ))}
    </ul>
</nav>

<style>
    .dropdown-content {
      position: absolute;
      top: 100%;
      min-width: 160px;
      opacity: 0;
      transform: translateY(-10px);
      transition: all 0.3s;
      pointer-events: none;
      text-align: left;
    }

    .dropdown:hover .dropdown-content {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }
</style>